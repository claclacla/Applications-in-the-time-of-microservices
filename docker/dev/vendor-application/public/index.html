<html>

<head>
  <style>
    table {
      border-collapse: collapse;
      border: 1px solid black;
    }

    table td {
      border: 1px solid black;
      padding: 6px;
    }
  </style>
  <script src="js/jquery-3.3.1.min.js"></script>
  <script src="js/socket.io.js"></script>
  <script>
    $(function () {
      let socket = io("http://localhost:3002", { path: "/order/vendor-application" });

      socket.on('order.placed', function (payload) {
        let uid = payload.data;

        fetch("http://localhost:3000/order/" + uid, {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json',
            credentials: 'include'
          }
        }).then(res => res.json())
          .catch(error => console.error('Error:', error))
          .then(response => {
            let order = response.data;
            console.log(order);

            $("#orders").append(
              "<tr>" +
              "<td>" + order.uid + "</td>" +
              "<td>" + order.number + "</td>" +
              "<td>" + order.user.email + "</td>" +
              "<td>" + order.status + "</td>" +
              "<td><input type=\"button\" value=\"Update\"/></td>" +
              "</tr>"
            );
          });
      });
    });
  </script>
</head>

<body>
  Orders
  <br />
  <br />
  <table id="orders">
    <tr>
      <td>UID</td>
      <td>Number</td>
      <td>User</td>
      <td>Status</td>
      <td>&nbsp;</td>
    </tr>
  </table>
</body>

</html>