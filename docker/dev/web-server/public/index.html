<html>

<head>
  <script src="js/jquery-3.3.1.min.js"></script>
  <script src="js/socket.io.js"></script>
  <script>
    $(function () {
      let socket = io("http://localhost:3001", { path: "/order" });

      $("#insertOrder").mousedown(() => {
        let order = {
          "user": {
            "name": "Simone",
            "email": "info@claclacla.com",
            "mobile": "321987654"
          }
        };

        fetch("http://localhost:3000/order", {
          method: 'POST',
          body: JSON.stringify(order),
          headers: {
            'Content-Type': 'application/json',
            credentials: 'include'
          }
        }).then(res => res.json())
          .catch(error => console.error('Error:', error))
          .then(response => {
            let order = response.data.order;

            //socket.emit("order.dispatch", { number: order.number });
          });
      });

      // socket.on('message.dispatched', function (payload) {
      //   $('#messages').append($('<li>').text(payload.message));
      // });
    });
  </script>
</head>

<body>
  <input type="button" value="Insert order" id="insertOrder" />
  <br />
  <br />
  <ul id="messages">
  </ul>
</body>

</html>