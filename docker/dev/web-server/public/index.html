<html>

<head>
  <script src="js/jquery-3.3.1.min.js"></script>
  <script src="js/socket.io.js"></script>
  <script>
    $(function () {
      let socket = io("http://localhost:3001", { path: "/order" });

      $("#insertOrder").mousedown(() => {
        let order = {
          "user": {
            "name": "Simone", 
            "email": "info@claclacla.com", 
            "mobile": "321987654"
          }
        };

        $.post({
          url: "http://localhost:3000",
          data: order,
          success: () => {
            $('#messages').append($('<li>').text("Order placed!"));
          }
        });

        socket.emit("set.order.number", { number });
      });

      socket.on('message.dispatched', function (payload) {
        $('#messages').append($('<li>').text(payload.message));
      });
    });
  </script>
</head>

<body>
  <input type="button" value="Insert order" id="insertOrder" />
  <br />
  <br />
  <ul id="messages">
  </ul>
</body>

</html>